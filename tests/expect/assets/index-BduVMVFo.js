const _=e=>Symbol.for(`atomico/${e}`),D=e=>({current:e});function G(e,t){const s=e.length;if(s!==t.length)return!1;for(let o=0;o<s;o++){let n=e[o],a=t[o];if(n!==a)return!1}return!0}const R=e=>typeof e=="function",w=e=>typeof e=="object",{isArray:Z}=Array;function I(e,t){let s;const o=n=>{let{length:a}=n;for(let f=0;f<a;f++){const l=n[f];if(l&&Array.isArray(l))o(l);else{const r=typeof l;if(l==null||r==="function"||r==="boolean")continue;r==="string"||r==="number"?(s==null&&(s=""),s+=l):(s!=null&&(t(s),s=null),t(l))}}};o(e),s!=null&&t(s)}const M=(e,t,s,o)=>(e.addEventListener(t,s,o),()=>e.removeEventListener(t,s)),C=_("hooks");globalThis[C]=globalThis[C]||{};let g=globalThis[C];const $="unmount",Q=_("hook/suspense"),B=e=>{const{i:t,hooks:s}=g.c,o=s[t]=s[t]||{};return o.value=e(o.value),g.c.i++,s[t].value},x=(e,t)=>{const{i:s,hooks:o}=g.c;o[e]=o[e]||{},o[e][s]=t,g.c.i++},V=e=>B((t=D(e))=>t),U=()=>B((e=D(g.c.host))=>e),tt=(e,t,s=0)=>{let o={},n=!1;return{render:r=>{g.c={host:t,hooks:o,update:e,i:0,id:s};let c;try{n=!1,c=r()}catch(d){if(d!==Q)throw d;n=!0}finally{g.c=null}return c},dispatch:(r,c)=>{const d=o[r];for(const h in d)d[h](c)},isSuspense:()=>n}},et="effect",st="layoutEffect",X="insertionEffect",ot=e=>(t,s)=>{const o=V({});x(e,()=>{const{current:n}=o;if(!n.args||n.args&&!G(n.args,s)){n.args=s,n.clean?.();const a=t();a&&(n.clean=a)}}),x($,()=>{o.current.clean&&(o.current.clean(),o.current={})})},F=ot(X),nt="formAssociated",it="formDisabled",rt="formReset",ct={checked:1,value:1,selected:1},at={list:1,type:1,size:1,form:1,width:1,height:1,src:1,href:1,slot:1},lt={shadowDom:1,staticNode:1,cloneNode:1,children:1,key:1},N={},v=[];class k extends Text{}const ft=_("id"),A=_("ref"),ut=()=>{},Y=(e,t,...s)=>{const o=t||N;let{children:n}=o;return n=n??(s.length?s:v),e===ut?n:!e.prototype&&e instanceof Function?e(n!=v?{children:n,...o}:o):{type:e,props:o,key:o.key}};function H(e,t,s=ft,o,n){let a;const f=!n;if(n=f?[]:n,t&&t[s]&&t[s].vnode==e)return t;const{type:l,props:r=N}=e;if(e||!t){o=o||e.type=="svg";const b=l instanceof Node?1:l.prototype instanceof HTMLElement?2:0;a=l!="host"&&(b==1?(t&&r.cloneNode?t[A]:t)!=l:b==2?!(t instanceof l):t?t[A]||t.localName!=l:!t),a&&(b==1&&r.cloneNode?(t=l.cloneNode(!0),t[A]=l):t=b==1?l:b==2?new l:o?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l,r.is?{is:r.is}:void 0))}const c=t[s]?t[s]:N,{vnode:d=N,cycle:h=0}=c;let{fragment:i,handlers:u}=c;const{props:m=N}=d,{children:O=v}=m;if(u=a?{}:u||{},r.staticNode&&!a)return t;if(r.shadowDom&&!t.shadowRoot&&t.attachShadow({mode:"open",...r.shadowDom}),r!=m&&mt(t,m,r,u,o,n),r.children!==O){const b=r.shadowDom?t.shadowRoot:t;i=dt(r.children,i,b,s,o&&e.type=="foreignObject"?!1:o,n)}if(t[s]={vnode:e,handlers:u,fragment:i,cycle:h+1},f){let b;for(;b=n.shift();)b()}return t}function ht(e){const t=new k(""),s=new k("");return e.append(t,s),{markStart:t,markEnd:s}}function dt(e,t,s,o,n,a){e=e==null?null:Z(e)?e:[e];const f=t||ht(s),{markStart:l,markEnd:r,keyes:c}=f;let d;const h=c&&new Set;let i=l;if(e&&I(e,u=>{const m=typeof u,O=m=="object"&&"type"in u&&"props"in u,b=m=="string"||m=="number";if(!O&&!b)return;const S=u.key,z=c&&S!=null&&c.get(S);i!=r&&i===z?h.delete(i):i=i==r?r:i.nextSibling;const y=c?z:i;let p=y;if(b){const E=u+"";!(p instanceof Text)||p instanceof k?p=new Text(E):p.data!=E&&(p.data=E)}else p=H(u,y,o,n,a);if(p!=i){c&&h.delete(p);const E=c&&(p||y).isConnected?"moveBefore":"insertBefore";!y||c?(s[E](p,i),c&&i!=r&&h.add(i)):y==r?s[E](p,r):(s.replaceChild(p,y),i=p)}S!=null&&(d=d||new Map,d.set(S,p))}),i=i==r?r:i.nextSibling,t&&i!=r)for(;i!=r;){const u=i;i=i.nextSibling,u.remove()}return h&&h.forEach(u=>u.remove()),f.keyes=d,f}function mt(e,t,s,o,n,a){for(const f in t)!(f in s)&&L(e,f,t[f],null,o,n,a);for(const f in s)L(e,f,t[f],s[f],o,n,a)}function L(e,t,s,o,n,a,f){if(t=t=="class"&&!a?"className":t,s=s??null,o=o??null,t in e&&ct[t]&&(s=e[t]),o===s||lt[t]||t[0]=="_")return;if(e.localName==="slot"&&t==="assignNode"&&"assign"in e){f.push(()=>e.assign(o));return}const l=R(s),r=R(o);if(t.startsWith("on")&&(r||l)){pt(e,t.slice(2),o,n);return}if(t==="ref"){o&&(r?f.push(()=>o(e)):o.current=e);return}if(t==="style"&&"style"in e){const{style:h}=e,i=w(s),u=w(o);if(i&&u){for(const m in s)m in o||P(h,m,null);for(const m in o)s[m]!==o[m]&&P(h,m,o[m])}else if(u)for(const m in o)P(h,m,o[m]);else h.cssText=o||"";return}const c=t.startsWith("$")?t.slice(1):t;c===t&&(!a&&!at[t]&&t in e||r||l)?e[t]=o??"":o==null?e.removeAttribute(c):e.setAttribute(c,w(o)?JSON.stringify(o):o)}function pt(e,t,s,o){if(!o)return;o.handleEvent||(o.handleEvent=function(a){const f=o[a.type];if(typeof f=="function")return f.call(e,a)});const n=!!o[t];if(s){const f=s&&(s.capture||s.once||s.passive)?{capture:!!s.capture,once:!!s.once,passive:!!s.passive}:void 0;n||e.addEventListener(t,o.handleEvent,f),o[t]=s}else n&&(e.removeEventListener(t,o.handleEvent),delete o[t])}function P(e,t,s){if(t.indexOf("-")!==-1){s==null?e.removeProperty(t):e.setProperty(t,s);return}e[t]=s}class J{constructor(t,s,o){this.message=s,this.target=t,this.value=o}}class bt extends J{}class gt extends J{}const yt=null,Et={true:1,"":1,1:1};function Nt(e,t,s,o,n){const{type:a,reflect:f,value:l,attr:r=St(t)}=w(s)&&s!=yt?s:{type:s};Object.defineProperty(e,t,{configurable:!0,set(c){const d=this[t];l&&c==null&&(c=l.call({self:this,prop:t}));const{error:h,value:i}=Ot(a,c);if(h&&i!=null)throw new bt(this,`The value defined for prop '${t}' must be of type '${a.name}'`,i);d!=i&&(this._props[t]=i??void 0,this.update(),this.updated.then(()=>{f&&(this._ignoreAttr=r,Tt(this,a,r,this[t]),this._ignoreAttr=null)}))},get(){return this._props[t]}}),l&&(n[t]=null),o[r]={prop:t,type:a}}const wt=(e,{type:t,base:s=CustomEvent,...o})=>e.dispatchEvent(new s(t,o)),St=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),Tt=(e,t,s,o)=>o==null||t==Boolean&&!o?e.removeAttribute(s):e.setAttribute(s,w(o)?JSON.stringify(o):t==Boolean?"":o.toString()),_t=(e,t)=>e==Boolean?!!Et[t]:e==Number?Number(t):e==String?t:e==Array||e==Object?JSON.parse(t):new e(t),Ot=(e,t)=>e==null||t==null?{value:t,error:!1}:e!=String&&t===""?{value:void 0,error:!1}:e==Object||e==Array||e==Symbol?{value:t,error:{}.toString.call(t)!==`[object ${e.name}]`}:t instanceof e?{value:t,error:e==Number&&Number.isNaN(t.valueOf())}:e==String||e==Number||e==Boolean?{value:t,error:e==Number?typeof t!="number"?!0:Number.isNaN(t):e==String?typeof t!="string":typeof t!="boolean"}:{value:t,error:!0};let At=0;const W=(e,t)=>{const s={},o={},{props:n,styles:a,form:f}={props:{},...t};class l extends HTMLElement{static formAssociated=f;constructor(){super(),this._setup(),this._render=()=>e({...this._props});for(const c in o)this[c]=o[c]}async _setup(){this._props=this._props||{},this.symbolId=this.symbolId||Symbol(),this._hooks=this._hooks||tt(()=>this.update(),this,"c"+At++);let c=new Promise(i=>this._mount=i),d,h=!0;this.update=()=>{if(d)return;d=!0;const i=this._hooks;this.updated=c.then(()=>{try{const u=i.render(this._render);i.dispatch(X),u&&H(u,this,this.symbolId),d=!1,h&&!i.isSuspense()&&(h=!1,Pt(this)),i.dispatch(st)}finally{d=!1}}).then(()=>{i.dispatch(et)})},this.update()}connectedCallback(){this._unmount=()=>{(!this.isConnected||this.lastParentNode!=this.parentNode)&&this._hooks.dispatch($),this.parentNode||(this.lastParentNode=this.parentNode)},this.lastParentNode!=this.parentNode&&(this._mount(),this.update()),this.lastParentNode=this.parentNode}disconnectedCallback(){this._unmount()}attributeChangedCallback(c,d,h){if(s[c]){if(c===this._ignoreAttr||d===h)return;const{prop:i,type:u}=s[c];try{this[i]=_t(u,h)}catch{throw new gt(this,`The value defined as attr '${c}' cannot be parsed by type '${u.name}'`,h)}}}static get observedAttributes(){for(const c in n)Nt(this.prototype,c,n[c],s,o);return Object.keys(s)}static get styles(){return[a]}static get props(){return n}async formResetCallback(){await this.updated,this._hooks.dispatch(rt)}async formAssociatedCallback(c){await this.updated,this._hooks.dispatch(nt,c)}async formDisabledCallback(c){await this.updated,this._hooks.dispatch(it,c)}}return l};function Pt(e){const{styles:t}=e.constructor,{shadowRoot:s}=e;if(s&&t.length){const o=[];I(t,n=>o.push(n)),o.length&&(s.adoptedStyleSheets=o)}}const Ct=(e,t={})=>{const s=U();return s[e]||(s[e]=(o=t.detail)=>{e in s.current?s.current[e](o):wt(s.current,{type:e,...t,detail:o})}),s[e]};new Promise(e=>{document.readyState==="loading"?M(document,"DOMContentLoaded",e):e()});const vt=Y("host",{style:"display: contents"}),K="value",kt="ChangedValue",zt="ConnectContext",Rt=(e,t)=>{const s=U(),o=Ct(kt);F(()=>{o()},[t]),F(()=>M(s.current,zt,n=>{n.composedPath().at(0)!==n.currentTarget&&e===n.detail.id&&(n.stopPropagation(),n.detail.connect(s.current))}),[e]),s.current[K]=t},xt=e=>{const t=W(({value:s})=>(Rt(t,s),vt),{props:{value:{type:Object,value:()=>e}}});return t[K]=e,t},j={};function q(e,...t){const s=(e.raw||e).reduce((o,n,a)=>o+n+(t[a]||""),"");return j[s]=j[s]||Ft(s)}function Ft(e){const t=new CSSStyleSheet;return t.replaceSync(e),t}xt({dispatch(e,t){}});const T=(e,t,s)=>(t==null?t={key:s}:t.key=s,Y(e,t)),Lt=T,jt=W(({message:e})=>Lt("host",{shadowDom:!0,children:[T("div",{class:"layer",children:e}),T("div",{class:"box",children:T("slot",{})})]}),{props:{message:{type:String,value:()=>"Hello."}},styles:q`:host,.layer{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative}.layer{position:absolute;top:0;left:0;font-size:20vw;font-weight:700;overflow:hidden;color:#fff;text-shadow:0px 2vw 4vw var(--hello-shadow-1, magenta),0px 2vw 1vw var(--hello-shadow-2, tomato);opacity:.15;align-items:flex-end}.box{position:relative}`});customElements.define("atomico-hello",jt);console.log(q`:host{--background: var(--my-component--background) }:host{background:var(--background)}/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}`);
